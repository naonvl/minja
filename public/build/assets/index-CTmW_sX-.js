import{_ as E}from"./VCheckboxBtn-CBo3EzyR.js";import{_ as A}from"./AppSelect.vue_vue_type_script_setup_true_lang-B9sI5Bc8.js";import{u as g}from"./useApi-BzX_iQ1o.js";import{d as M,k as $,r as u,w as q,o as n,c as _,e as c,b as a,f as s,v as w,a6 as y,F as J,i as O,g as R,z as K}from"./main-4BgHkaow.js";import{$ as j}from"./api-B8Kh2wIo.js";import{a as m,V as D}from"./VRow-D6t27fyo.js";import{V as x}from"./VCard-BvZTY96N.js";import{V as S}from"./VCardText-CK1fyD_D.js";import"./VTextField-Orf0uSS6.js";import"./index-D42iiP2e.js";import"./VImg-DDpr_atp.js";import"./VOverlay-hrL7fPrw.js";import"./VSelect-rR1gWBgs.js";import"./VList-usKrrLXk.js";import"./VAvatar-CaMZbQjD.js";import"./VDivider-WM0YM376.js";import"./VMenu-2nd0z92_.js";import"./VChip-cTSyTR6T.js";import"./index-BYrzgnBV.js";/* empty css              */const G={class:"d-flex flex-wrap justify-space-between gap-y-4 gap-x-6 mb-6"},z=c("div",{class:"d-flex flex-column justify-center"},[c("h4",{class:"text-h4 font-weight-medium"},"Input Aktifitas")],-1),L={class:"d-flex gap-4 align-center flex-wrap"},H={class:"d-flex flex-column gap-y-4"},ke=M({__name:"index",setup(Q){const P=$(),d=u(1),h=u([]),V=u([]),k=u([]),b=u([]),e=u({employee:"Pilih Karyawan",activities:[{qty:null,brand:"Pilih Brand",task:"Pilih Tugas",product:"Pilih Produk"}]});(async()=>{try{const l=await g("/data-masters?all=1",{method:"GET"});if(l.data.value){const r=(await l.data.value).data,f=r.filter(t=>t.type_master_data==="task"),o=r.filter(t=>t.type_master_data==="produk"),i=r.filter(t=>t.type_master_data==="brand"),B=f.map(t=>({title:t.name,value:t.id})),U=o.map(t=>({title:t.name,value:t.id})),F=i.map(t=>({title:t.name,value:t.id})),N=(await(await g("/employees",{method:"GET"})).data.value).data.map(t=>({title:t.fullname,value:t.id}));h.value=N,V.value=B,k.value=U,b.value=F}}catch(l){console.error(l)}})();const C=l=>{d.value-=1,e.value.activities.splice(l,1),e.value.activities.splice(l,1),e.value.activities.splice(l,1),e.value.activities.splice(l,1)},T=()=>{d.value=d.value+1,e.value.activities.push({qty:null,brand:"Pilih Brand",task:"Pilih Tugas",product:"Pilih Produk"})},I=async()=>{const l=await j("/activities",{method:"POST",body:{employee_id:e.value.employee,activities:e.value.activities}});console.log(await l),localStorage.removeItem("unsavedFormData"),P.replace("/apps/activities/list")};q(()=>e.value,l=>{localStorage.setItem("unsavedFormData",JSON.stringify(l))},{deep:!0});const p=localStorage.getItem("unsavedFormData");return p&&(e.value=JSON.parse(p),d.value=JSON.parse(p).activities.length),(l,v)=>{const r=A,f=E;return n(),_("div",null,[c("div",G,[z,c("div",L,[a(y,{color:"primary",onClick:I},{default:s(()=>[w(" Simpan ")]),_:1})])]),a(D,null,{default:s(()=>[a(m,{cols:"12"},{default:s(()=>[a(x,{title:"Karyawan"},{default:s(()=>[a(S,null,{default:s(()=>[c("div",H,[a(r,{modelValue:e.value.employee,"onUpdate:modelValue":v[0]||(v[0]=o=>e.value.employee=o),items:h.value,label:"Karyawan",placeholder:"Select Item"},null,8,["modelValue","items"])])]),_:1})]),_:1})]),_:1}),a(m,{cols:"12"},{default:s(()=>[a(x,{title:"Aktifitas"},{default:s(()=>[a(S,null,{default:s(()=>[(n(!0),_(J,null,O(d.value,o=>(n(),_("div",{key:o,class:"border rounded pa-3 mb-3"},[a(D,{class:"position-relative"},{default:s(()=>[a(m,{cols:"12",md:"3"},{default:s(()=>[a(r,{modelValue:e.value.activities[o-1].brand,"onUpdate:modelValue":i=>e.value.activities[o-1].brand=i,items:b.value,label:"Brand",placeholder:"Select Item"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),a(m,{cols:"12",md:"3"},{default:s(()=>[a(r,{modelValue:e.value.activities[o-1].task,"onUpdate:modelValue":i=>e.value.activities[o-1].task=i,items:V.value,label:"Tugas",placeholder:"Select Item"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),a(m,{cols:"12",md:"3"},{default:s(()=>[a(r,{modelValue:e.value.activities[o-1].product,"onUpdate:modelValue":i=>e.value.activities[o-1].product=i,items:k.value,label:"Produk",placeholder:"Select Item"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),a(m,{cols:"12",md:"3"},{default:s(()=>[a(f,{modelValue:e.value.activities[o-1].qty,"onUpdate:modelValue":i=>e.value.activities[o-1].qty=i,label:"Jumlah (Pcs)",placeholder:"0"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),d.value>1?(n(),R(y,{key:0,icon:"tabler-trash",color:"error",onClick:i=>C(o),class:"position-absolute",style:{top:"-20px",right:"-20px"}},null,8,["onClick"])):K("",!0)]),_:2},1024)]))),128)),a(y,{class:"mt-6","prepend-icon":"tabler-plus",onClick:T},{default:s(()=>[w(" Tambah ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}});export{ke as default};
