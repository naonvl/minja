import{_ as ie}from"./AppSelect.vue_vue_type_script_setup_true_lang-COG6PGKQ.js";import{_ as re}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-CNbQaSDG.js";import{_ as ue}from"./VCheckboxBtn-DN7CUPU7.js";import{d as de,j as me,r as m,n as s,o as M,g as ce,f as a,b as e,e as o,x as v,v as d,a0 as b,a6 as f,a2 as T,c as pe,i as fe,F as _e,a5 as R,s as F,z as ve,a as be}from"./main-BTg9bMtt.js";import{u as O}from"./useApi-BLOb0wok.js";import{$ as D}from"./api-DZvvG-kN.js";import{V as h}from"./VCard-Bek_KHji.js";import{V as c}from"./VCardText-D38AISll.js";import{V as J}from"./VChip-DcT_hpFz.js";import{V as W}from"./VAvatar-JfF8YMoq.js";import{a as i,V as g}from"./VRow-Cm2weuok.js";import{V as ye,a as Ve,c as U,b as xe}from"./VWindowItem-Br-ZRbur.js";import{V as K}from"./VForm-1vEp34DP.js";import{V as Q}from"./VDialog-BRjnsoVe.js";import{V as A}from"./VDivider-ak2BmXWs.js";import{V as z}from"./VDataTableServer-DS72geLE.js";import"./VTextField-DU2n18Ex.js";import"./index-C6WemI_K.js";import"./VImg-glX9ijsE.js";import"./VOverlay-D-ini0Hn.js";import"./VSelect-By7Rxhkn.js";import"./VList-CZGiPWFO.js";import"./VMenu-DKSncBYL.js";import"./index-BYrzgnBV.js";/* empty css              */const he={class:"text-h5 mt-4"},ge={class:"d-flex justify-center gap-y-2 flex-wrap mb-6"},ke={class:"d-flex align-center me-8"},we={class:"text-h5"},Ce=o("span",{class:"text-xs"},"Rp.",-1),je=o("span",{class:"text-sm"},"Estimasi Gaji",-1),Be={class:"d-flex align-center me-4"},Pe={class:"text-h5"},Se=o("span",{class:"text-xs"},"Pcs",-1),Te=o("span",{class:"text-sm"},"Selesai",-1),De=o("h5",{class:"text-h5"},"Daftar Gaji",-1),Ge={class:"d-flex align-center gap-x-4"},Ne={class:"d-flex flex-column"},$e={class:"text-base"},Ue={class:"font-weight-medium text-link"},Ae=o("h5",{class:"text-h5"},"Daftar Bonus & Tunjangan",-1),ze={class:"d-flex align-center gap-x-4"},Ie={class:"d-flex flex-column"},Ee={class:"text-base"},Le={class:"font-weight-medium text-link"},Me=o("h5",{class:"text-h5"},"Daftar Slip Gaji",-1),Re={class:"d-flex align-center gap-x-4"},Fe={class:"d-flex flex-column"},Oe={class:"text-base"},Je={class:"font-weight-medium text-link"},ya=de({__name:"[id]",setup(We){const q=me(),y=m(!1),V=m(!1),k=m(null),H=[{icon:"tabler-users",title:"Akun"},{icon:"tabler-bookmark",title:"Gaji"},{icon:"tabler-bookmark",title:"Slip Gaji"}],_=m({task_type_id:"Pilih Tugas",product_id:"Pilih Produk",amount:null}),x=m({name:"",amount:null}),C=m(!1),j=m(!1),u=m({}),X=[{title:"Nama Gaji",key:"name"},{title:"Nominal (Per Pcs)",key:"amount"},{title:"Aksi",key:"actions",sortable:!1}],Y=[{title:"Aktifitas",key:"name"},{title:"Nominal (Per Pcs)",key:"amount"},{title:"Aksi",key:"actions",sortable:!1}],Z=[{title:"Nama Bonus",key:"name"},{title:"Nominal (Per Minggu)",key:"amount"},{title:"Aksi",key:"actions",sortable:!1}],I=m([{name:"Buang Benang Mukena",amount:200},{name:"Buang Benang Kerudung",amount:2e3}]),w=m([{name:"Jabatan",amount:200}]),E=m([]),L=m([]),ee=m([]),G=async()=>{const l=await(await O("/employees/"+q.params.id)).data.value;u.value=l.data,console.log(l),I.value=l.data.salaries,w.value=l.data.benefits};G();const B=n=>`${n.toLocaleString("id-ID")}`,ae=n=>{switch(n){case"Jahit":return{color:"warning",icon:"tabler-user"};case"QC":return{color:"success",icon:"tabler-circle-check"};default:return{color:"primary",icon:"tabler-user"}}},te=n=>{switch(n){case"inactive":return{color:"warning",icon:"tabler-user"};case"Active":return{color:"success",icon:"tabler-circle-check"};default:return{color:"primary",icon:"tabler-user"}}},le=async()=>{try{const n=await D("/salaries",{method:"POST",body:{employee_id:u.value.id,task_type_id:_.value.task_type_id,product_id:_.value.product_id,amount:Number(_.value.amount)}});y.value=!1,n.data?G():console.error(n.error)}catch(n){console.error(n)}finally{}},N=async n=>{const l=await D("/salaries/"+n,{method:"DELETE"});console.log(l),G()},se=async()=>{try{const n=await D("/benefits",{method:"POST",body:{employee_id:u.value.id,name:x.value.name,amount:Number(x.value.amount)}});n.data?(w.value=[...w.value,{id:w.value.length+1,name:x.value.name,nominal:x.value.amount}],V.value=!1):console.error(n.error)}catch(n){console.error(n)}finally{}},oe=async()=>{y.value=!0;const n=await O("/data-masters?all=1",{method:"GET"});if(n.data.value){const p=(await n.data.value).data,P=p.filter(r=>r.type_master_data==="task"),S=p.filter(r=>r.type_master_data==="produk");E.value=P.map(r=>({title:r.name,value:r.id})),L.value=S.map(r=>({title:r.name,value:r.id}))}else console.error(n.error)},ne=async()=>{(await await D("/employees/fire",{method:"POST",body:{employee_id:u.value.id}})).status==200?u.value.status="Inactive":console.log()};return(n,l)=>{const p=ue,P=re,S=ie,r=be("IconBtn");return s(u).department?(M(),ce(g,{key:0},{default:a(()=>[e(i,{cols:"12",md:"5",lg:"4"},{default:a(()=>[e(h,null,{default:a(()=>[e(c,{class:"text-center pt-12"},{default:a(()=>[o("h5",he,v(s(u).fullname),1),e(J,{color:ae(s(u).department.name).color,label:"",size:"small",class:"text-capitalize mt-4"},{default:a(()=>[d(v(s(u).department.name),1)]),_:1},8,["color"]),e(J,{color:te(s(u).status).color,label:"",size:"small",class:"text-capitalize mt-4 ml-5"},{default:a(()=>[d(v(s(u).status),1)]),_:1},8,["color"]),e(c,{class:"px-0"},{default:a(()=>[o("div",ge,[o("div",ke,[e(W,{size:30,rounded:"",color:"primary",variant:"tonal",class:"me-4"},{default:a(()=>[e(b,{icon:"tabler-checkbox",size:"24"})]),_:1}),o("div",null,[o("h5",we,[Ce,d(" "+v(B(s(u).estSalary)),1)]),je])]),o("div",Be,[e(W,{size:30,rounded:"",color:"primary",variant:"tonal",class:"me-4"},{default:a(()=>[e(b,{icon:"tabler-briefcase",size:"24"})]),_:1}),o("div",null,[o("h5",Pe,[d(v(s(u).totalActivities)+" ",1),Se]),Te])])])]),_:1})]),_:1}),e(c,{class:"d-flex justify-center gap-x-4"},{default:a(()=>[e(f,{variant:"elevated"},{default:a(()=>[d(" Edit ")]),_:1}),e(f,{variant:"tonal",color:"error",onClick:ne},{default:a(()=>[d(" Suspend ")]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{cols:"12",md:"7",lg:"8"},{default:a(()=>[e(ye,{modelValue:s(k),"onUpdate:modelValue":l[0]||(l[0]=t=>T(k)?k.value=t:null),class:"v-tabs-pill"},{default:a(()=>[(M(),pe(_e,null,fe(H,t=>e(xe,{key:t.icon},{default:a(()=>[e(b,{size:18,icon:t.icon,class:"me-1"},null,8,["icon"]),o("span",null,v(t.title),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),e(Ve,{modelValue:s(k),"onUpdate:modelValue":l[16]||(l[16]=t=>T(k)?k.value=t:null),class:"mt-6 disable-tab-transition",touch:!1},{default:a(()=>[e(U,null,{default:a(()=>[e(g,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(h,{title:"Ganti Username"},{default:a(()=>[e(c,null,{default:a(()=>[e(K,{onSubmit:R(()=>{},["prevent"])},{default:a(()=>[e(g,null,{default:a(()=>[e(i,{cols:"12",md:"6"},{default:a(()=>[e(p,{label:"Username Lama",modelValue:s(u).user.username,"onUpdate:modelValue":l[1]||(l[1]=t=>s(u).user.username=t),placeholder:"",disabled:!0,type:"text"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"6"},{default:a(()=>[e(p,{label:"Username Baru",placeholder:"username",type:"text"})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(f,{type:"submit"},{default:a(()=>[d(" Simpan ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(h,{title:"Ganti Password"},{default:a(()=>[e(c,null,{default:a(()=>[e(K,{onSubmit:R(()=>{},["prevent"])},{default:a(()=>[e(g,null,{default:a(()=>[e(i,{cols:"12",md:"6"},{default:a(()=>[e(p,{label:"New Password",placeholder:"············",type:s(C)?"text":"password","append-inner-icon":s(C)?"tabler-eye-off":"tabler-eye","onClick:appendInner":l[2]||(l[2]=t=>C.value=!s(C))},null,8,["type","append-inner-icon"])]),_:1}),e(i,{cols:"12",md:"6"},{default:a(()=>[e(p,{label:"Confirm Password",placeholder:"············",type:s(j)?"text":"password","append-inner-icon":s(j)?"tabler-eye-off":"tabler-eye","onClick:appendInner":l[3]||(l[3]=t=>j.value=!s(j))},null,8,["type","append-inner-icon"])]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(f,{type:"submit"},{default:a(()=>[d(" Simpan ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(U,null,{default:a(()=>[e(g,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(h,null,{default:a(()=>[e(c,{class:"d-flex justify-space-between align-center flex-wrap gap-4"},{default:a(()=>[De,o("div",null,[e(Q,{modelValue:s(y),"onUpdate:modelValue":l[9]||(l[9]=t=>T(y)?y.value=t:null),persistent:"",width:"600"},{activator:a(({props:t})=>[e(f,F({onClick:oe},t,{"prepend-icon":"tabler-plus"}),{default:a(()=>[d(" Tambah Gaji ")]),_:2},1040)]),default:a(()=>[e(P,{onClick:l[4]||(l[4]=t=>y.value=!s(y))}),e(h,{title:"Tambah Gaji"},{default:a(()=>[e(c,null,{default:a(()=>[e(g,null,{default:a(()=>[e(i,{cols:"12",sm:"6"},{default:a(()=>[e(S,{modelValue:s(_).task_type_id,"onUpdate:modelValue":l[5]||(l[5]=t=>s(_).task_type_id=t),items:s(E),label:"Tugas",placeholder:"Select Item"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",sm:"6"},{default:a(()=>[e(S,{modelValue:s(_).product_id,"onUpdate:modelValue":l[6]||(l[6]=t=>s(_).product_id=t),items:s(L),label:"Produk",placeholder:"Select Item"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",sm:"6"},{default:a(()=>[e(p,{modelValue:s(_).amount,"onUpdate:modelValue":l[7]||(l[7]=t=>s(_).amount=t),label:"Nominal Per Pcs",placeholder:"0",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[e(f,{variant:"tonal",color:"secondary",onClick:l[8]||(l[8]=t=>y.value=!1)},{default:a(()=>[d(" Tutup ")]),_:1}),e(f,{onClick:le},{default:a(()=>[d(" Simpan ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}),e(A),e(z,{itemsLength:5,headers:X,items:s(I),"items-per-page":5},{"item.amount":a(({item:t})=>[o("div",Ge,[o("div",Ne,[o("h6",$e,[o("p",Ue,v(B(t.amount)),1)])])])]),"item.actions":a(({item:t})=>[e(r,null,{default:a(()=>[e(b,{icon:"tabler-edit"})]),_:1}),e(r,{onClick:$=>N(t.id)},{default:a(()=>[e(b,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:1},8,["items"])]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(h,null,{default:a(()=>[e(c,{class:"d-flex justify-space-between align-center flex-wrap gap-4"},{default:a(()=>[Ae,o("div",null,[e(Q,{modelValue:s(V),"onUpdate:modelValue":l[15]||(l[15]=t=>T(V)?V.value=t:null),persistent:"",width:"600"},{activator:a(({props:t})=>[e(f,F({onClick:l[10]||(l[10]=$=>V.value=!0)},t,{"prepend-icon":"tabler-plus"}),{default:a(()=>[d(" Tambah Benefit ")]),_:2},1040)]),default:a(()=>[e(P,{onClick:l[11]||(l[11]=t=>V.value=!s(V))}),e(h,{title:"Tambah Benefit"},{default:a(()=>[e(c,null,{default:a(()=>[e(g,null,{default:a(()=>[e(i,{cols:"12",sm:"6"},{default:a(()=>[e(p,{modelValue:s(x).name,"onUpdate:modelValue":l[12]||(l[12]=t=>s(x).name=t),label:"Nama Benefit",placeholder:"0",type:"text"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",sm:"6"},{default:a(()=>[e(p,{modelValue:s(x).amount,"onUpdate:modelValue":l[13]||(l[13]=t=>s(x).amount=t),label:"Nominal Per Minggu",placeholder:"0",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[e(f,{variant:"tonal",color:"secondary",onClick:l[14]||(l[14]=t=>V.value=!1)},{default:a(()=>[d(" Tutup ")]),_:1}),e(f,{onClick:se},{default:a(()=>[d(" Simpan ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}),e(A),e(z,{itemsLength:5,headers:Z,items:s(w),"items-per-page":5},{"item.amount":a(({item:t})=>[o("div",ze,[o("div",Ie,[o("h6",Ee,[o("p",Le,v(B(t.amount)),1)])])])]),"item.actions":a(({item:t})=>[e(r,null,{default:a(()=>[e(b,{icon:"tabler-edit"})]),_:1}),e(r,{onClick:$=>N(t.id)},{default:a(()=>[e(b,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1}),e(U,null,{default:a(()=>[e(g,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(h,null,{default:a(()=>[e(c,{class:"d-flex justify-space-between align-center flex-wrap gap-4"},{default:a(()=>[Me]),_:1}),e(A),e(z,{itemsLength:5,headers:Y,items:s(ee),"items-per-page":5},{"item.amount":a(({item:t})=>[o("div",Re,[o("div",Fe,[o("h6",Oe,[o("p",Je,v(B(t.amount)),1)])])])]),"item.actions":a(({item:t})=>[e(r,null,{default:a(()=>[e(b,{icon:"tabler-edit"})]),_:1}),e(r,{onClick:$=>N(t.id)},{default:a(()=>[e(b,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):ve("",!0)}}});export{ya as default};
