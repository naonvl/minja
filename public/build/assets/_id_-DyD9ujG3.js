import{_ as se}from"./AppSelect.vue_vue_type_script_setup_true_lang-B9sI5Bc8.js";import{_ as oe}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-5JoomPGh.js";import{_ as ne}from"./VCheckboxBtn-CBo3EzyR.js";import{d as ie,j as re,r as m,n as s,o as I,g as ue,f as a,b as e,e as o,x as v,v as d,a0 as b,a6 as f,a2 as D,c as de,i as me,F as ce,a5 as E,s as L,z as pe,a as fe}from"./main-4BgHkaow.js";import{u as M}from"./useApi-BzX_iQ1o.js";import{$ as G}from"./api-B8Kh2wIo.js";import{V as h}from"./VCard-BvZTY96N.js";import{V as c}from"./VCardText-CK1fyD_D.js";import{V as R}from"./VChip-cTSyTR6T.js";import{V as F}from"./VAvatar-CaMZbQjD.js";import{a as i,V as g}from"./VRow-D6t27fyo.js";import{V as _e,a as ve,b as N,c as be}from"./VWindowItem-DgxKHCMG.js";import{V as O}from"./VForm-D7PEynhQ.js";import{V as J}from"./VDialog-GPeySY5Z.js";import{V as U}from"./VDivider-WM0YM376.js";import{V as $}from"./VDataTableServer-B49BN_X1.js";import"./VTextField-Orf0uSS6.js";import"./index-D42iiP2e.js";import"./VImg-DDpr_atp.js";import"./VOverlay-hrL7fPrw.js";import"./VSelect-rR1gWBgs.js";import"./VList-usKrrLXk.js";import"./VMenu-2nd0z92_.js";import"./index-BYrzgnBV.js";/* empty css              */const ye={class:"text-h5 mt-4"},Ve={class:"d-flex justify-center gap-y-2 flex-wrap mb-6"},xe={class:"d-flex align-center me-8"},he={class:"text-h5"},ge=o("span",{class:"text-xs"},"Rp.",-1),ke=o("span",{class:"text-sm"},"Estimasi Gaji",-1),we={class:"d-flex align-center me-4"},je={class:"text-h5"},Ce=o("span",{class:"text-xs"},"Pcs",-1),Be=o("span",{class:"text-sm"},"Selesai",-1),Pe=o("h5",{class:"text-h5"},"Daftar Gaji",-1),Se={class:"d-flex align-center gap-x-4"},Te={class:"d-flex flex-column"},De={class:"text-base"},Ge={class:"font-weight-medium text-link"},Ne=o("h5",{class:"text-h5"},"Daftar Bonus & Tunjangan",-1),Ue={class:"d-flex align-center gap-x-4"},$e={class:"d-flex flex-column"},Ae={class:"text-base"},ze={class:"font-weight-medium text-link"},Ie=o("h5",{class:"text-h5"},"Daftar Slip Gaji",-1),Ee={class:"d-flex align-center gap-x-4"},Le={class:"d-flex flex-column"},Me={class:"text-base"},Re={class:"font-weight-medium text-link"},ba=ie({__name:"[id]",setup(Fe){const W=re(),y=m(!1),V=m(!1),k=m(null),K=[{icon:"tabler-users",title:"Akun"},{icon:"tabler-bookmark",title:"Gaji"},{icon:"tabler-bookmark",title:"Slip Gaji"}],_=m({task_type_id:"Pilih Tugas",product_id:"Pilih Produk",amount:null}),x=m({name:"",amount:null}),C=m(!1),B=m(!1),u=m({}),Q=[{title:"Nama Gaji",key:"name"},{title:"Nominal (Per Pcs)",key:"amount"},{title:"Aksi",key:"actions",sortable:!1}],q=[{title:"Aktifitas",key:"name"},{title:"Nominal (Per Pcs)",key:"amount"},{title:"Aksi",key:"actions",sortable:!1}],H=[{title:"Nama Bonus",key:"name"},{title:"Nominal (Per Minggu)",key:"amount"},{title:"Aksi",key:"actions",sortable:!1}],w=m([{name:"Buang Benang Mukena",amount:200},{name:"Buang Benang Kerudung",amount:2e3}]),j=m([{name:"Jabatan",amount:200}]),A=m([]),z=m([]),X=m([]);(async()=>{const l=await(await M("/employees/"+W.params.id)).data.value;u.value=l.data,console.log(l),w.value=l.data.salaries,j.value=l.data.benefits})();const P=n=>`${n.toLocaleString("id-ID")}`,Y=n=>{switch(n){case"Jahit":return{color:"warning",icon:"tabler-user"};case"QC":return{color:"success",icon:"tabler-circle-check"};default:return{color:"primary",icon:"tabler-user"}}},Z=n=>{switch(n){case"inactive":return{color:"warning",icon:"tabler-user"};case"Active":return{color:"success",icon:"tabler-circle-check"};default:return{color:"primary",icon:"tabler-user"}}},ee=async()=>{try{const n=await G("/salaries",{method:"POST",body:{employee_id:u.value.id,task_type_id:_.value.task_type_id,product_id:_.value.product_id,amount:Number(_.value.amount)}});n.data?(w.value=[...w.value,{id:w.value.length+1,name:n.data.value.name,nominal:n.data.value.amount}],y.value=!1):console.error(n.error)}catch(n){console.error(n)}finally{}},ae=async()=>{try{const n=await G("/benefits",{method:"POST",body:{employee_id:u.value.id,name:x.value.name,amount:Number(x.value.amount)}});n.data?(j.value=[...j.value,{id:j.value.length+1,name:x.value.name,nominal:x.value.amount}],V.value=!1):console.error(n.error)}catch(n){console.error(n)}finally{}},te=async()=>{y.value=!0;const n=await M("/data-masters?all=1",{method:"GET"});if(n.data.value){const p=(await n.data.value).data,S=p.filter(r=>r.type_master_data==="task"),T=p.filter(r=>r.type_master_data==="produk");A.value=S.map(r=>({title:r.name,value:r.id})),z.value=T.map(r=>({title:r.name,value:r.id}))}else console.error(n.error)},le=async()=>{(await await G("/employees/fire",{method:"POST",body:{employee_id:u.value.id}})).status==200?u.value.status="Inactive":console.log()};return(n,l)=>{const p=ne,S=oe,T=se,r=fe("IconBtn");return s(u).department?(I(),ue(g,{key:0},{default:a(()=>[e(i,{cols:"12",md:"5",lg:"4"},{default:a(()=>[e(h,null,{default:a(()=>[e(c,{class:"text-center pt-12"},{default:a(()=>[o("h5",ye,v(s(u).fullname),1),e(R,{color:Y(s(u).department.name).color,label:"",size:"small",class:"text-capitalize mt-4"},{default:a(()=>[d(v(s(u).department.name),1)]),_:1},8,["color"]),e(R,{color:Z(s(u).status).color,label:"",size:"small",class:"text-capitalize mt-4 ml-5"},{default:a(()=>[d(v(s(u).status),1)]),_:1},8,["color"]),e(c,{class:"px-0"},{default:a(()=>[o("div",Ve,[o("div",xe,[e(F,{size:30,rounded:"",color:"primary",variant:"tonal",class:"me-4"},{default:a(()=>[e(b,{icon:"tabler-checkbox",size:"24"})]),_:1}),o("div",null,[o("h5",he,[ge,d(" "+v(P(s(u).estSalary)),1)]),ke])]),o("div",we,[e(F,{size:30,rounded:"",color:"primary",variant:"tonal",class:"me-4"},{default:a(()=>[e(b,{icon:"tabler-briefcase",size:"24"})]),_:1}),o("div",null,[o("h5",je,[d(v(s(u).totalActivities)+" ",1),Ce]),Be])])])]),_:1})]),_:1}),e(c,{class:"d-flex justify-center gap-x-4"},{default:a(()=>[e(f,{variant:"elevated"},{default:a(()=>[d(" Edit ")]),_:1}),e(f,{variant:"tonal",color:"error",onClick:le},{default:a(()=>[d(" Suspend ")]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{cols:"12",md:"7",lg:"8"},{default:a(()=>[e(_e,{modelValue:s(k),"onUpdate:modelValue":l[0]||(l[0]=t=>D(k)?k.value=t:null),class:"v-tabs-pill"},{default:a(()=>[(I(),de(ce,null,me(K,t=>e(be,{key:t.icon},{default:a(()=>[e(b,{size:18,icon:t.icon,class:"me-1"},null,8,["icon"]),o("span",null,v(t.title),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),e(ve,{modelValue:s(k),"onUpdate:modelValue":l[16]||(l[16]=t=>D(k)?k.value=t:null),class:"mt-6 disable-tab-transition",touch:!1},{default:a(()=>[e(N,null,{default:a(()=>[e(g,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(h,{title:"Ganti Username"},{default:a(()=>[e(c,null,{default:a(()=>[e(O,{onSubmit:E(()=>{},["prevent"])},{default:a(()=>[e(g,null,{default:a(()=>[e(i,{cols:"12",md:"6"},{default:a(()=>[e(p,{label:"Username Lama",modelValue:s(u).user.username,"onUpdate:modelValue":l[1]||(l[1]=t=>s(u).user.username=t),placeholder:"",disabled:!0,type:"text"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"6"},{default:a(()=>[e(p,{label:"Username Baru",placeholder:"username",type:"text"})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(f,{type:"submit"},{default:a(()=>[d(" Simpan ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(h,{title:"Ganti Password"},{default:a(()=>[e(c,null,{default:a(()=>[e(O,{onSubmit:E(()=>{},["prevent"])},{default:a(()=>[e(g,null,{default:a(()=>[e(i,{cols:"12",md:"6"},{default:a(()=>[e(p,{label:"New Password",placeholder:"············",type:s(C)?"text":"password","append-inner-icon":s(C)?"tabler-eye-off":"tabler-eye","onClick:appendInner":l[2]||(l[2]=t=>C.value=!s(C))},null,8,["type","append-inner-icon"])]),_:1}),e(i,{cols:"12",md:"6"},{default:a(()=>[e(p,{label:"Confirm Password",placeholder:"············",type:s(B)?"text":"password","append-inner-icon":s(B)?"tabler-eye-off":"tabler-eye","onClick:appendInner":l[3]||(l[3]=t=>B.value=!s(B))},null,8,["type","append-inner-icon"])]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(f,{type:"submit"},{default:a(()=>[d(" Simpan ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(N,null,{default:a(()=>[e(g,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(h,null,{default:a(()=>[e(c,{class:"d-flex justify-space-between align-center flex-wrap gap-4"},{default:a(()=>[Pe,o("div",null,[e(J,{modelValue:s(y),"onUpdate:modelValue":l[9]||(l[9]=t=>D(y)?y.value=t:null),persistent:"",width:"600"},{activator:a(({props:t})=>[e(f,L({onClick:te},t,{"prepend-icon":"tabler-plus"}),{default:a(()=>[d(" Tambah Gaji ")]),_:2},1040)]),default:a(()=>[e(S,{onClick:l[4]||(l[4]=t=>y.value=!s(y))}),e(h,{title:"Tambah Gaji"},{default:a(()=>[e(c,null,{default:a(()=>[e(g,null,{default:a(()=>[e(i,{cols:"12",sm:"6"},{default:a(()=>[e(T,{modelValue:s(_).task_type_id,"onUpdate:modelValue":l[5]||(l[5]=t=>s(_).task_type_id=t),items:s(A),label:"Tugas",placeholder:"Select Item"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",sm:"6"},{default:a(()=>[e(T,{modelValue:s(_).product_id,"onUpdate:modelValue":l[6]||(l[6]=t=>s(_).product_id=t),items:s(z),label:"Produk",placeholder:"Select Item"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",sm:"6"},{default:a(()=>[e(p,{modelValue:s(_).amount,"onUpdate:modelValue":l[7]||(l[7]=t=>s(_).amount=t),label:"Nominal Per Pcs",placeholder:"0",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[e(f,{variant:"tonal",color:"secondary",onClick:l[8]||(l[8]=t=>y.value=!1)},{default:a(()=>[d(" Tutup ")]),_:1}),e(f,{onClick:ee},{default:a(()=>[d(" Simpan ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}),e(U),e($,{itemsLength:5,headers:Q,items:s(w),"items-per-page":5},{"item.amount":a(({item:t})=>[o("div",Se,[o("div",Te,[o("h6",De,[o("p",Ge,v(P(t.amount)),1)])])])]),"item.actions":a(({item:t})=>[e(r,null,{default:a(()=>[e(b,{icon:"tabler-edit"})]),_:1}),e(r,null,{default:a(()=>[e(b,{icon:"tabler-trash"})]),_:1})]),_:1},8,["items"])]),_:1})]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(h,null,{default:a(()=>[e(c,{class:"d-flex justify-space-between align-center flex-wrap gap-4"},{default:a(()=>[Ne,o("div",null,[e(J,{modelValue:s(V),"onUpdate:modelValue":l[15]||(l[15]=t=>D(V)?V.value=t:null),persistent:"",width:"600"},{activator:a(({props:t})=>[e(f,L({onClick:l[10]||(l[10]=Je=>V.value=!0)},t,{"prepend-icon":"tabler-plus"}),{default:a(()=>[d(" Tambah Benefit ")]),_:2},1040)]),default:a(()=>[e(S,{onClick:l[11]||(l[11]=t=>V.value=!s(V))}),e(h,{title:"Tambah Benefit"},{default:a(()=>[e(c,null,{default:a(()=>[e(g,null,{default:a(()=>[e(i,{cols:"12",sm:"6"},{default:a(()=>[e(p,{modelValue:s(x).name,"onUpdate:modelValue":l[12]||(l[12]=t=>s(x).name=t),label:"Nama Benefit",placeholder:"0",type:"text"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",sm:"6"},{default:a(()=>[e(p,{modelValue:s(x).amount,"onUpdate:modelValue":l[13]||(l[13]=t=>s(x).amount=t),label:"Nominal Per Minggu",placeholder:"0",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[e(f,{variant:"tonal",color:"secondary",onClick:l[14]||(l[14]=t=>V.value=!1)},{default:a(()=>[d(" Tutup ")]),_:1}),e(f,{onClick:ae},{default:a(()=>[d(" Simpan ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}),e(U),e($,{itemsLength:5,headers:H,items:s(j),"items-per-page":5},{"item.amount":a(({item:t})=>[o("div",Ue,[o("div",$e,[o("h6",Ae,[o("p",ze,v(P(t.amount)),1)])])])]),"item.actions":a(({item:t})=>[e(r,null,{default:a(()=>[e(b,{icon:"tabler-edit"})]),_:1}),e(r,null,{default:a(()=>[e(b,{icon:"tabler-trash"})]),_:1})]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1}),e(N,null,{default:a(()=>[e(g,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(h,null,{default:a(()=>[e(c,{class:"d-flex justify-space-between align-center flex-wrap gap-4"},{default:a(()=>[Ie]),_:1}),e(U),e($,{itemsLength:5,headers:q,items:s(X),"items-per-page":5},{"item.amount":a(({item:t})=>[o("div",Ee,[o("div",Le,[o("h6",Me,[o("p",Re,v(P(t.amount)),1)])])])]),"item.actions":a(({item:t})=>[e(r,null,{default:a(()=>[e(b,{icon:"tabler-edit"})]),_:1}),e(r,null,{default:a(()=>[e(b,{icon:"tabler-trash"})]),_:1})]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):pe("",!0)}}});export{ba as default};
